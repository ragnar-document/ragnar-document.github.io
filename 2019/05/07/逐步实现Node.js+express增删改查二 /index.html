<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="dongxinglong"><title>é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥ï¼ˆ äºŒ ï¼‰ Â· Ragnar</title><meta name="description" content="é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥ï¼ˆ äºŒ ï¼‰çŸ¥è¯†å‚¨å¤‡insertåˆ›å»ºæ’å…¥æŸ¥è¯¢ï¼Œå°†è¦æ’å…¥è¡Œçš„å±æ€§çš„å“ˆå¸Œæˆ–æ’å…¥çš„æ•°ç»„ä½œä¸ºå•ä¸ªæ’å…¥å‘½ä»¤æ‰§è¡Œã€‚ä½¿ç”¨åŒ…å«æ’å…¥æ¨¡å‹çš„ç¬¬ä¸€ä¸ªæ’å…¥æ ‡è¯†çš„æ•°ç»„æˆ–è€…åŒ…å«æ‰€æœ‰æ’å…¥çš„postgresqlæ ‡è¯†çš„æ•°ç»„æˆ–Amazon Redshiftçš„è¡Œæ•°è§£ææ‰¿è¯º/å®ç°å›è°ƒã€‚inser"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/touxiang.png" style="width:127px;"><h3 title><a href="/">Ragnar</a></h3><div class="description"><p>ä¸æ–­å­¦ä¹ /ä¸æ–­è¯·æ•™/ä¸æ–­å°è¯•/</p></div></div><div class="div"><img src="/images/ewm.png" style="width:80px;"></div></div><ul class="social-links"></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://ragnar-document.github.io"> Ragnar</a><span>&</span><a href="https://segmentfault.com/u/tonyge"> æ€å¦Â¨</a><div class="by_farbox"><a href="https://github.com/xiaojilinggui" target="_blank">æ¬¢è¿æŸ¥çœ‹æˆ‘çš„GitHub ğŸ‘‰ç‚¹æˆ‘&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">é¦–é¡µ</a></li><li><a href="/archives">å½’æ¡£</a></li><li><a href="/tags/css/">Css</a></li><li><a href="/tags/vue/">Vue</a></li><li><a href="/tags/js/">JavaScript</a></li><li><a href="/about">å…³äº</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥ï¼ˆ äºŒ ï¼‰</a></h3></div><div class="post-content"><h1 id="é€æ­¥å®ç°Node-js-expresså¢åˆ æ”¹æŸ¥ï¼ˆ-äºŒ-ï¼‰"><a href="#é€æ­¥å®ç°Node-js-expresså¢åˆ æ”¹æŸ¥ï¼ˆ-äºŒ-ï¼‰" class="headerlink" title="é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥ï¼ˆ äºŒ ï¼‰"></a>é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥ï¼ˆ äºŒ ï¼‰</h1><h3 id="çŸ¥è¯†å‚¨å¤‡"><a href="#çŸ¥è¯†å‚¨å¤‡" class="headerlink" title="çŸ¥è¯†å‚¨å¤‡"></a>çŸ¥è¯†å‚¨å¤‡</h3><h4 id="insert"><a href="#insert" class="headerlink" title="insert"></a>insert</h4><p>åˆ›å»ºæ’å…¥æŸ¥è¯¢ï¼Œå°†è¦æ’å…¥è¡Œçš„å±æ€§çš„å“ˆå¸Œæˆ–æ’å…¥çš„æ•°ç»„ä½œä¸ºå•ä¸ªæ’å…¥å‘½ä»¤æ‰§è¡Œã€‚ä½¿ç”¨åŒ…å«æ’å…¥æ¨¡å‹çš„ç¬¬ä¸€ä¸ªæ’å…¥æ ‡è¯†çš„æ•°ç»„æˆ–è€…åŒ…å«æ‰€æœ‰æ’å…¥çš„postgresqlæ ‡è¯†çš„æ•°ç»„æˆ–Amazon Redshiftçš„è¡Œæ•°è§£ææ‰¿è¯º/å®ç°å›è°ƒã€‚insert åˆ›å»ºæ’å…¥æŸ¥è¯¢ï¼Œå°†è¦æ’å…¥è¡Œçš„å±æ€§çš„å“ˆå¸Œæˆ–æ’å…¥æ•°ç»„</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Returns [1] in "mysql", "sqlite", "oracle"; [] in "postgresql" unless the 'returning' parameter is set.</span></span><br><span class="line">knex(<span class="string">'books'</span>).insert(&#123;<span class="attr">title</span>: <span class="string">'Slaughterhouse Five'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡º</span></span><br><span class="line">insert into <span class="string">`books`</span> (<span class="string">`title`</span>) values (<span class="string">'Slaughterhouse Five'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="Where-è¯­å¥"><a href="#Where-è¯­å¥" class="headerlink" title="Where è¯­å¥"></a>Where è¯­å¥</h4><p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å¸®åŠ©åŠ¨æ€åœ°ä»å¥ã€‚åœ¨å¾ˆå¤šåœ°æ–¹ï¼Œå‡½æ•°å¯ä»¥ç”¨æ¥ä»£æ›¿å€¼ï¼Œæ„é€ å­æŸ¥è¯¢ã€‚åœ¨å¤§å¤šæ•°åœ°æ–¹ï¼Œç°æœ‰çš„knexæŸ¥è¯¢å¯èƒ½ç”¨äºç»„æˆå­æŸ¥è¯¢ç­‰ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°çš„æ˜¯å¯¹è±¡è¯­æ³•</p>
<p>ä¾‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">knex(<span class="string">'users'</span>).where(&#123;</span><br><span class="line">  first_name: <span class="string">'Test'</span>,</span><br><span class="line">  last_name:  <span class="string">'User'</span></span><br><span class="line">&#125;).select(<span class="string">'id'</span>)</span><br><span class="line">..</span><br><span class="line"><span class="comment">//è¾“å‡º</span></span><br><span class="line">select <span class="string">`id`</span> <span class="keyword">from</span> <span class="string">`users`</span> where <span class="string">`first_name`</span> = <span class="string">'Test'</span> and <span class="string">`last_name`</span> = <span class="string">'User'</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äº<strong>async</strong>å’Œ<strong>await</strong><a href="https://www.kancloud.cn/xiaojilinggui/qianduan/1015353" target="_blank" rel="noopener">å…³é”®å­—çš„ç†è§£</a></p>
<h4 id="ç¬¬ä¸€æ­¥æ·»åŠ å¢åˆ æ”¹æŸ¥æ–¹æ³•models-user-js"><a href="#ç¬¬ä¸€æ­¥æ·»åŠ å¢åˆ æ”¹æŸ¥æ–¹æ³•models-user-js" class="headerlink" title="ç¬¬ä¸€æ­¥æ·»åŠ å¢åˆ æ”¹æŸ¥æ–¹æ³•models/user.js"></a>ç¬¬ä¸€æ­¥æ·»åŠ å¢åˆ æ”¹æŸ¥æ–¹æ³•models/user.js</h4><p>æ·»åŠ insertã€updataã€deleteæ–¹æ³•</p>
<p>ä½¿ç”¨knexçŸ¥è¯†</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸¾ä¾‹</span></span><br><span class="line"><span class="comment">//.catch()æ˜¯ä¸€ç§ç®€å•çš„å¤„ç†é”™è¯¯çš„æ–¹æ³•å¤§è‡´éƒ½ä¸€æ ·æ‰€ä»¥ä¸éœ€è¦å¤ªå¤§ä¿®æ”¹æ ¹æ®å®é™…æƒ…å†µèµ°</span></span><br><span class="line"><span class="comment">//then() æ–¹æ³•è¿”å›ä¸€ä¸ª  Promise ã€‚å®ƒæœ€å¤šéœ€è¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼šPromise çš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µçš„å›è°ƒå‡½æ•°ã€‚</span></span><br><span class="line">insert: <span class="function"><span class="keyword">function</span>(<span class="params">params</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">reslove,reject</span>)=&gt;</span>&#123;</span><br><span class="line">      knex(TABLE).insert(params)</span><br><span class="line">      .then( <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        reslove(res)</span><br><span class="line">      &#125;).catch( <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬äºŒæ­¥åœ¨controllers-user-js-æ·»åŠ å¢åˆ æ”¹æŸ¥çš„å‚æ•°å’Œé€»è¾‘"><a href="#ç¬¬äºŒæ­¥åœ¨controllers-user-js-æ·»åŠ å¢åˆ æ”¹æŸ¥çš„å‚æ•°å’Œé€»è¾‘" class="headerlink" title="ç¬¬äºŒæ­¥åœ¨controllers/user.js æ·»åŠ å¢åˆ æ”¹æŸ¥çš„å‚æ•°å’Œé€»è¾‘"></a>ç¬¬äºŒæ­¥åœ¨controllers/user.js æ·»åŠ å¢åˆ æ”¹æŸ¥çš„å‚æ•°å’Œé€»è¾‘</h4><p><strong>è¯·æ±‚ </strong> <a href="http://expressjs.com/en/api.html#req.body" target="_blank" rel="noopener">Req.body</a> åŒ…å«è¯·æ±‚æ­£æ–‡ä¸­æäº¤çš„é”®å€¼å¯¹æ•°æ®</p>
<p><strong>å“åº”</strong>  <a href="http://expressjs.com/en/api.html#res.json" target="_blank" rel="noopener">Res.json</a> å‘é€JSONå“åº”ã€‚æ­¤æ–¹æ³•ä½¿ç”¨<strong>JSON.stringify</strong>å‘é€å“åº”ï¼ˆå…·æœ‰æ­£ç¡®çš„å†…å®¹ç±»å‹ï¼‰ï¼Œè¯¥å“åº”æ˜¯è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²çš„å‚æ•°ã€‚</p>
<p>è¯¥å‚æ•°å¯ä»¥æ˜¯ä»»ä½•JSONç±»å‹ï¼ŒåŒ…æ‹¬å¯¹è±¡ï¼Œæ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼Œæ•°å­—æˆ–nullï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨å®ƒå°†å…¶ä»–å€¼è½¬æ¢ä¸ºJSONã€‚</p>
<p>ä¾‹1ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.json(&#123; <span class="attr">code</span>: <span class="number">200</span>, <span class="attr">data</span>: users&#125;)</span><br></pre></td></tr></table></figure>
<p>ä¾‹2:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">res.json(<span class="literal">null</span>);</span><br><span class="line">res.json(&#123; <span class="attr">user</span>: <span class="string">'tobi'</span> &#125;);</span><br><span class="line">res.status(<span class="number">500</span>).json(&#123; <span class="attr">error</span>: <span class="string">'message'</span> &#125;);</span><br></pre></td></tr></table></figure>
<h5 id="res-renderï¼ˆview-ï¼Œlocals-ï¼Œcallback-ï¼‰"><a href="#res-renderï¼ˆview-ï¼Œlocals-ï¼Œcallback-ï¼‰" class="headerlink" title="res.renderï¼ˆview [ï¼Œlocals] [ï¼Œcallback]ï¼‰"></a>res.renderï¼ˆview [ï¼Œlocals] [ï¼Œcallback]ï¼‰</h5><p>Locals æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§å®šä¹‰è§†å›¾å±€éƒ¨å˜é‡</p>
<p>callback ä¸€ä¸ªå›è°ƒå‡½æ•°å¦‚æœæä¾›ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›å¯èƒ½çš„é”™è¯¯å’Œå‘ˆç°çš„å­—ç¬¦ä¸²ï¼Œä½†ä¸æ‰§è¡Œè‡ªåŠ¨å“åº”ã€‚å‘ç”Ÿé”™è¯¯æ—¶ï¼Œè¯¥æ–¹æ³•åœ¨<code>next(err)</code>å†…éƒ¨è°ƒç”¨ã€‚</p>
<p>ä¾‹å­ä¸­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res.render(<span class="string">'user/show.tpl'</span>,res.locals)</span><br></pre></td></tr></table></figure>
<p>Res.locals åŒ…å«ä½œç”¨äºè¯·æ±‚çš„å“åº”å±€éƒ¨å˜é‡å¯¹è±¡ï¼Œå› æ­¤ä»…å¯¹åœ¨è¯·æ±‚å“åº”å‘¨æœŸå‘ˆç°çš„è§†å›¾å¯ç”¨</p>
<p>æ­¤å±æ€§å¯¹äºå…¬å¼€è¯·æ±‚çº§åˆ«ä¿¡æ¯ï¼ˆä¾‹å¦‚è¯·æ±‚è·¯å¾„åï¼Œç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ï¼Œç”¨æˆ·è®¾ç½®ç­‰ï¼‰éå¸¸æœ‰ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app.use(function(req, res, next)&#123;</span><br><span class="line">  res.locals.user = req.user;</span><br><span class="line">  res.locals.authenticated = ! req.user.anonymous;</span><br><span class="line">  next();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬ä¸‰æ­¥è¯·æ±‚æ•°æ®"><a href="#ç¬¬ä¸‰æ­¥è¯·æ±‚æ•°æ®" class="headerlink" title="ç¬¬ä¸‰æ­¥è¯·æ±‚æ•°æ®"></a>ç¬¬ä¸‰æ­¥è¯·æ±‚æ•°æ®</h4><p>æŠŠåŸºæœ¬è®¾æ–½å»ºè®¾å®Œæ¯•ä»¥åæˆ‘ä»¬éœ€è¦æŠŠæˆ‘ä»¬çš„ä¸œè¥¿è¿é€å‡ºå»è¿™ä¸ªä»»åŠ¡æˆ‘ä»¬éœ€è¦äº¤ç»™æˆ‘ä»¬çš„è·¯ç”±å»å¤„ç†</p>
<p><strong>è·¯ç”±æ–¹æ³•</strong></p>
<p>Express æ”¯æŒå¯¹åº”äº HTTP æ–¹æ³•çš„ä»¥ä¸‹è·¯ç”±æ–¹æ³•ï¼š<code>get</code>ã€<code>post</code>ã€<code>put</code>ã€<code>head</code>ã€<code>delete</code>ã€<code>options</code>ã€<code>trace</code>ã€<code>copy</code>ã€<code>lock</code>ã€<code>mkcol</code>ã€<code>move</code>ã€<code>purge</code>ã€<code>propfind</code>ã€<code>proppatch</code>ã€<code>unlock</code>ã€<code>report</code>ã€<code>mkactivity</code>ã€<code>checkout</code>ã€<code>merge</code>ã€<code>m-search</code>ã€<code>notify</code>ã€<code>subscribe</code>ã€<code>unsubscribe</code>ã€<code>patch</code>ã€<code>search</code> å’Œ <code>connect</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒä¸€ä¸ªæ¥å£åœ°å€ï¼Œä½†æ˜¯ä¸åŒçš„è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">router.post(<span class="string">'/user'</span> , userController.insert);</span><br><span class="line">router.put(<span class="string">'/user'</span> , userController.update);</span><br><span class="line">router.delete(<span class="string">'/user'</span> , userController.delete);</span><br></pre></td></tr></table></figure>
<h4 id="ç¬¬å››æ­¥å±•ç°å‡ºæ¥"><a href="#ç¬¬å››æ­¥å±•ç°å‡ºæ¥" class="headerlink" title="ç¬¬å››æ­¥å±•ç°å‡ºæ¥"></a>ç¬¬å››æ­¥å±•ç°å‡ºæ¥</h4><p>ç»™show.tplæ·»åŠ jqueryç‚¹å‡»äº‹ä»¶ç­‰</p>
<h5 id="ajax"><a href="#ajax" class="headerlink" title="$.ajax()"></a>$.ajax()</h5><p>è¯¥æ–¹æ³•ç”¨äºæ‰§è¡ŒAjaxè¯·æ±‚å¸¸ç”¨ä¸å…¶ä»–jquery ajaxè¯·ä¸èƒ½å®Œæˆçš„è¯·æ±‚ </p>
<h5 id="å¯é€‰å­—æ®µ"><a href="#å¯é€‰å­—æ®µ" class="headerlink" title="å¯é€‰å­—æ®µ"></a>å¯é€‰å­—æ®µ</h5><p>Url:     é“¾æ¥åœ°å€ï¼Œå­—ç¬¦ä¸²è¡¨ç¤º</p>
<p>Data:    éœ€è¦å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ® GETä¸POSTéƒ½å¯ä»¥    </p>
<p>Type:    è¯·æ±‚ç±»å‹</p>
<p>Timeout:    è¯·æ±‚è¶…æ—¶æ—¶é—´</p>
<p>Cache:    æ˜¯å¦ç¼“å­˜è¯·æ±‚ç»“æœboolè¡¨ç¤º</p>
<p>contentType:    å†…å®¹ç±»å‹</p>
<p>dataType:    æœåŠ¡å™¨å“åº”æ•°æ®ç±»å‹å­—ç¬¦ä¸²è¡¨ç¤ºå½“å¡«å†™ä¸ºjsonæ—¶ï¼Œå›è°ƒå‡½æ•°ä¸­æ— éœ€å†å¯¹æ•°æ®ååºåˆ—åŒ–ä¸ºjson</p>
<p>Success:    è¯·æ±‚æˆåŠŸåæœåŠ¡å™¨å›è°ƒçš„å‡½æ•°</p>
<p>Error:    è¯·æ±‚å¤±è´¥åæœåŠ¡å™¨å›è°ƒçš„å‡½æ•°</p>
<p>Complete:    è¯·æ±‚å®Œæˆåè°ƒç”¨çš„å‡½æ•°æ— è®ºè¯·æ±‚æˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½ä¼šè°ƒç”¨è¯¥å‡½æ•°å¦‚æœè®¾ç½®äº†successä¸errorå‡½æ•°ï¼Œåˆ™è¯¥å‡½æ•°åœ¨å®ƒä»¬ä¹‹åè¢«è°ƒç”¨</p>
<p>Async:    æ˜¯å¦å¼‚æ­¥å¤„ç† boolè¡¨ç¤º é»˜è®¤true<strong>è®¾ç½®è¯¥å€¼ä¸ºfalseåï¼ŒJSä¸ä¼šå‘ä¸‹æ‰§è¡Œï¼Œè€Œæ˜¯åŸåœ°ç­‰å¾…æœåŠ¡å™¨è¿”å›æ•°æ®ï¼Œå¹¶å®Œæˆç›¸åº”çš„å›è°ƒå‡½æ•°åï¼Œå†å‘ä¸‹æ‰§è¡Œ</strong></p>
<p>Username: è®¿é—®è®¤è¯è¯·æ±‚ä¸­æºå¸¦çš„ç”¨æˆ·åï¼Œå­—ç¬¦ä¸²è¡¨ç¤º</p>
<p>Password: è¿”å›è®¤è¯è¯·æ±‚ä¸­æºå¸¦çš„å¯†ç ï¼Œå­—ç¬¦ä¸²è¡¨ç¤º</p>
<p>ä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="keyword">let</span> id = $(<span class="keyword">this</span>).data(<span class="string">'id'</span>);</span><br><span class="line">     </span><br><span class="line">     $.ajax(&#123;</span><br><span class="line">         url: <span class="string">'/api/user'</span>,</span><br><span class="line">         data: &#123; id &#125;,</span><br><span class="line">         type: <span class="string">'DELETE'</span>,</span><br><span class="line">         success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">           <span class="keyword">if</span>(data.code === <span class="number">200</span>)&#123;</span><br><span class="line">             alert(<span class="string">'åˆ é™¤æˆåŠŸï¼'</span>)</span><br><span class="line">             location.reload()</span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">             <span class="built_in">console</span>.log(data)</span><br><span class="line">           &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         error: <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(err)</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
<p><a href>ä¾‹å­ä¸‹è½½</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2019-05-07</span><i class="fa fa-tag"></i><a class="tag" href="/tags/js/" title="js">js </a><a class="tag" href="/tags/åç«¯/" title="åç«¯">åç«¯ </a><a class="tag" href="/tags/node-js/" title="node.js">node.js </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://yoursite.com/2019/05/07/é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥äºŒ /,Ragnar,é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥ï¼ˆ äºŒ ï¼‰,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2019/05/09/å¡æ¢…é¾™Chameleonä½“éªŒ/" title="å¡æ¢…é¾™Chameleonä½“éªŒ">ä¸Šä¸€ç¯‡</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2019/05/06/é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥ä¸€/" title="é€æ­¥å®ç°Node.js+expresså¢åˆ æ”¹æŸ¥ï¼ˆ ä¸€ ï¼‰">ä¸‹ä¸€ç¯‡</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>