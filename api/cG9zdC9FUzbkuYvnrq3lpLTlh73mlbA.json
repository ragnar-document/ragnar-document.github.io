{"title":"Es6学习笔记：箭头函数","date":"2019-04-30T09:24:47.000Z","link":"post/ES6之箭头函数","tags":["css","es6","js","前端"],"updated":"2019-05-05T12:31:45.000Z","content":"<h2 id=\"箭头函数-它长这样-gt-是不是很抽象呢😁\">箭头函数 它长这样    <code>=&gt;</code>  是不是很抽象呢😁<a href=\"post/ES6之箭头函数#箭头函数-它长这样-gt-是不是很抽象呢😁\"></a></h2><p>在Es6中箭头函数是其中最有趣的新增特性那么它有什么呢？？</p>\n<ol>\n<li><strong>没有this、super（特级）、arguments（参数）和new.target绑定</strong> 箭头函数中的<strong>this</strong>、<strong>super</strong>、以及<strong>new.target</strong>这些值由外围最近一层非箭头函数决定</li>\n<li><strong>不能通过new关键字调用箭头函数没有[[construct]]方法</strong>，所以不能被用作构造函数，如果通过new关键字调用箭头函数，程序会抛出错误</li>\n</ol>\n<blockquote>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; <span class=\"keyword\">var</span> Foo = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;&#125;;</span><br><span class=\"line\">&gt; <span class=\"keyword\">var</span> foo = <span class=\"keyword\">new</span> Foo(); <span class=\"comment\">// TypeError: Foo is not a constructor</span></span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<ol>\n<li><strong>没用原形由于不能通过new关键字调用箭头函数</strong>，因而没有构建原型的需求所以箭头函数不存在prototype这个属性</li>\n</ol>\n<blockquote>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; <span class=\"keyword\">var</span> Foo = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;&#125;;</span><br><span class=\"line\">&gt; <span class=\"built_in\">console</span>.log(Foo.prototype); <span class=\"comment\">// undefined</span></span><br><span class=\"line\">&gt;</span><br></pre></td></tr></table></figure>\n</blockquote>\n<ol>\n<li>不支持<strong>arguments</strong> 对象箭头函数<strong>没有arguments绑定</strong>，所以你必须通过命名参数和不定参数这两种形式访问函数的参数</li>\n<li><strong>不支持重复命名参数</strong> 无论在严格还是非严格模式下箭头函数都不能支持重复的命名参数；而在传统函数的规定中只有在严格模式下才不能有重复的命名参数</li>\n</ol>\n<h2 id=\"箭头函数的的大型选美现场👙\">箭头函数的的大型选美现场👙<a href=\"post/ES6之箭头函数#箭头函数的的大型选美现场👙\"></a></h2><p>一号佳丽🐱    当你只有单一参数和只需要返回简单的值时可以使用以下这种</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let refletct = value =&gt; value;</span><br><span class=\"line\"></span><br><span class=\"line\">\t等价于</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\tlet reflect = funciton(value)&#123;</span><br><span class=\"line\">\t\t\treturn value;</span><br><span class=\"line\">\t\t&#125;</span><br></pre></td></tr></table></figure>\n<p>二号佳丽🐶    两个以上的就比较豪气啦！弄个括号包起来毕竟不像 single dog嘛😂</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let sum = (num1 , num2) =&gt; num1 + num2</span><br><span class=\"line\"></span><br><span class=\"line\">\t等价于</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlet sum = function(num1 , num2)&#123;</span><br><span class=\"line\">\t\treturn sum1 + sum2</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>三号佳丽🏃‍♀️    因为跑步啥也没带所以我们啥也不用传那么要怎么写呢❓</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let sum = ( ) =&gt; &apos;hellow world&apos;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t等价于</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlet sum = function()&#123;</span><br><span class=\"line\">\t\treturn &apos;hellow world&apos;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>四号佳丽🏃    色即是空，🈳️即是色</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let sum =( ) =&gt; &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t等价于</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlet sum = function()&#123;</span><br><span class=\"line\">\t\t//....</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<p>五号佳丽🐍    花括号代表函数体的部分如果想在箭头函数外返回一个对象字面量，则需要将该字面量包括在小括号里</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">let getTempItem = id =&gt;(&#123;\tid:id, name:&quot;Temp&quot;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">\t等价于</span><br><span class=\"line\">\t</span><br><span class=\"line\">\tlet sum = function(id)&#123;</span><br><span class=\"line\">\t\treturn\t&#123;</span><br><span class=\"line\">\t\t\tid:id,</span><br><span class=\"line\">\t\t\tname:&quot;Temp&quot;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"不绑定This\">不绑定This<a href=\"post/ES6之箭头函数#不绑定This\"></a></h2><p>在箭头函数出现之前，每个新定义的函数都有它自己的 <code>this</code>值（在构造函数的情况下是一个新对象，在严格模式的函数调用中为 undefined，如果该函数被作为“对象方法”调用则为基础对象等）。<code>This</code>被证明是令人厌烦的面向对象风格的编程。</p>\n<p>⚠️箭头函数不会创建自己的<code>this,</code>它只会从自己的作用域链的上一层继承 <code>this</code> </p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.age = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  setInterval(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.age++; <span class=\"comment\">// |this| 正确地指向 p 实例</span></span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> p = <span class=\"keyword\">new</span> Person();</span><br></pre></td></tr></table></figure>\n<p>如果指向错误除了使用箭头函数还可以把值分配给封闭的变量，可以解决<code>this</code>问题</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">Person</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  that.age = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  setInterval(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">growUp</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//  回调引用的是`that`变量, 其值是预期的对象. </span></span><br><span class=\"line\">    that.age++;</span><br><span class=\"line\">  &#125;, <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"函数的写法\">函数的写法<a href=\"post/ES6之箭头函数#函数的写法\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\"><span class=\"params\">x</span> =&gt;</span> x * x;                  </span><br><span class=\"line\"><span class=\"comment\">// 简写函数 省略return</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">var</span> func = <span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> &#123; <span class=\"keyword\">return</span> x + y; &#125;; </span><br><span class=\"line\"><span class=\"comment\">//常规编写 明确的返回值</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"箭头函数也能使用三元表达式\">箭头函数也能使用三元表达式<a href=\"post/ES6之箭头函数#箭头函数也能使用三元表达式\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> simple = <span class=\"function\"><span class=\"params\">a</span> =&gt;</span> a &gt; <span class=\"number\">15</span> ? <span class=\"number\">15</span> : a;</span><br><span class=\"line\">simple(<span class=\"number\">16</span>); <span class=\"comment\">// 15</span></span><br><span class=\"line\">simple(<span class=\"number\">10</span>); <span class=\"comment\">// 10</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"更简明的promise链\">更简明的promise链<a href=\"post/ES6之箭头函数#更简明的promise链\"></a></h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">promise.then(<span class=\"function\"><span class=\"params\">a</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"params\">b</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<h4 id=\"箭头函数进行排序\">箭头函数进行排序<a href=\"post/ES6之箭头函数#箭头函数进行排序\"></a></h4><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> arr = [<span class=\"number\">10</span>, <span class=\"number\">20</span>, <span class=\"number\">1</span>, <span class=\"number\">2</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">arr.sort(<span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> x-y</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr); <span class=\"comment\">// [1, 2, 10, 20]</span></span><br><span class=\"line\"></span><br><span class=\"line\">arr.sort(<span class=\"function\">(<span class=\"params\">x, y</span>) =&gt;</span> x-y);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(arr); <span class=\"comment\">// [1, 2, 10, 20]</span></span><br></pre></td></tr></table></figure>\n<p>参考资料：深入了解ES6</p>\n<p>​                    <a href=\"https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/001438565969057627e5435793645b7acaee3b6869d1374000\" target=\"_blank\" rel=\"noopener\">廖雪峰</a></p>\n<p>​                    <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions\" target=\"_blank\" rel=\"noopener\">MDN web docs</a></p>\n<p>有待更新</p>\n<p>👏👏点我<a href=\"https://github.com/ragnar-document/ragnar-document.github.io/issues\" target=\"_blank\" rel=\"noopener\">提issue</a></p>\n","prev":{"title":"Es6学习笔记：这就是This （上）","link":"post/Es6之关于this （上）"},"next":{"title":"CSS命名规范指南_BEM风格","link":"post/CSS命名规范指南_BEM风格"},"plink":"http://yoursite.com/post/ES6之箭头函数/","toc":[{"title":"箭头函数 它长这样    <code>=&gt;</code>  是不是很抽象呢😁","id":"箭头函数-它长这样-gt-是不是很抽象呢😁","index":"1"},{"title":"箭头函数的的大型选美现场👙","id":"箭头函数的的大型选美现场👙","index":"2"},{"title":"不绑定This","id":"不绑定This","index":"3"}]}